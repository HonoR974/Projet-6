<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.w3.org/1999/xhtml"
>


<head>
    <title>Accueil</title>
    <meta charset="utf-8" />

    <link rel="stylesheet" th:href="@{/webjars/bootstrap/4.2.1/css/bootstrap.min.css}"/>
    <link th:href="@{/css/main.css}"  rel="stylesheet"/>

</head>
<body>

<!-- menu -->
<header>

    <!-- Menu -->
    <div class="row">

        <nav class=" col navbar navbar-expand-lg navbar-dark bg-dark">

            <!-- Le logo du menu -->
            <a class="navbar-brand" th:href="@{/}">Accueil </a>

            <!-- btn bascule de navigation -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- liens du menu  -->
            <div id="navbarContent" class="collapse navbar-collapse">
                <ul class="navbar-nav">

                    <li class="nav-item" sec:authorize="isAuthenticated()">
                        <a class="nav-link" th:href="@{/espace/accueil}">Espace Perso</a>
                    </li>
                    <li class="nav-item" sec:authorize="isAuthenticated()">
                        <a class="nav-link" th:href="@{/topo/liste(id=${user.id})}">Mes Topos</a>
                    </li>
                    <li class="nav-item" sec:authorize="isAnonymous()">
                        <a class="nav-link" th:href="@{/security/login}">Login</a>
                    </li>
                    <li class="nav-item " sec:authorize="isAnonymous()">
                        <a class="nav-link" th:href="@{/security/registration}">S'inscrire</a>
                    </li>
                    <li class="nav-item" sec:authorize="isAuthenticated()">
                        <a class="nav-link" th:href="@{/espace/accueil}">Mes Parametres</a>
                    </li>
                    <li class="nav-item " sec:authorize="isAuthenticated()">

                        <form  class="nav-link" th:action="@{/logout}" method="post">
                            <input type="submit" value="Logout"/>
                        </form>
                    </li>
                </ul>
            </div>

        </nav>
    </div>


</header>

<!-- Contenu -->
<div class="container">

    <!-- Partie hero -->
    <div class="row">

        <div class="col-12 jumbotron">
            <h2> Bienvenue <h1 sec:authentication="name"></h1> </h2>
        </div>

    </div>


    <!-- Partie hero -->
    <div class="row">

        <div class="col-12 jumbotron">
            <h2> Mes demandes de reservation </h2>
        </div>

    </div>

    <!-- reservartion Accepté  -->
    <div class="row">
            <table class="detail" border="1">
                <tr>
                    <th>Nom du Topo</th>
                    <th>Message</th>
                    <th>Retour au propriétaire </th>
                </tr>


                <!-- pour chaque reservation  -->
                <tr th:each ="reservation : ${listeAccepte}">
                    <td>
                        <a th:utext="${reservation.getTopo().getNom()}" th:href="@{/espace/topoReserve(id=${reservation.getTopo().getId()})}">...</a>
                    </td>

                    <td>
                        <p th:utext="${reservation.message}">...</p>
                    </td>
                    <td>
                        <form th:action="@{/espace/retourReservation(id_res=${reservation.id},
                                            id_user=${user.id})}"
                              method="post">
                            <button type="submit"  >
                                oui
                            </button>
                        </form>

                        <button type="button" >
                            non
                        </button>
                    </td>

                </tr>
            </table>
        </div>







    <!-- Partie titre -->
    <div class="row">

        <div class="col-12 jumbotron">
            <h2> les demandes que j'ai recu  </h2>
        </div>

    </div>

    <!-- reservartion en attente -->
    <div class="row">
        <table class="detail" border="1">
            <tr>
                <th>Nom du Topo</th>
                <th>Nom du Demandeur </th>
                <th>Message</th>
                <th>Choix</th>
            </tr>


            <!-- pour chaque reservation  -->
            <tr th:each ="reservation : ${listeReservation}">
                <td>
                    <p th:utext="${reservation.getTopo().getNom()}" >...</p>
                </td>

                <td>
                    <p th:utext="${reservation.getUser().getUsername()}">... </p>
                </td>
                <td>
                    <p th:utext="${reservation.message}">...</p>
                </td>
                <td>
                    <form th:action="@{/espace/accepteReservation(id=${reservation.id})}"
                    method="post">
                        <button type="submit"  >
                           oui
                        </button>
                    </form>

                    <button type="button" >
                        non
                    </button>
                </td>

            </tr>
        </table>
    </div>




</div>



<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>



</body>

</html>